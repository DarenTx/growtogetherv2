<!-- ── Enter Profiles (Admin) ─────────────────────────────────── -->
<div class="gt-page">
  <h1 class="gt-page-title">Enter Profiles</h1>

  <div class="gt-card">
    <form
      [formGroup]="form"
      (ngSubmit)="onSubmit()"
      novalidate
      aria-label="Create profile form"
      class="gt-form"
    >
      <div class="gt-field">
        <label class="gt-label" for="first_name">First Name</label>
        <input
          id="first_name"
          type="text"
          formControlName="first_name"
          autocomplete="given-name"
          aria-required="true"
          class="gt-input"
          [attr.aria-invalid]="form.controls.first_name.invalid && form.controls.first_name.touched"
        />
        @if (form.controls.first_name.invalid && form.controls.first_name.touched) {
          <p class="gt-field-error" role="alert">First name is required.</p>
        }
      </div>

      <div class="gt-field">
        <label class="gt-label" for="last_name">Last Name</label>
        <input
          id="last_name"
          type="text"
          formControlName="last_name"
          autocomplete="family-name"
          aria-required="true"
          class="gt-input"
          [attr.aria-invalid]="form.controls.last_name.invalid && form.controls.last_name.touched"
        />
        @if (form.controls.last_name.invalid && form.controls.last_name.touched) {
          <p class="gt-field-error" role="alert">Last name is required.</p>
        }
      </div>

      <div class="gt-field">
        <label class="gt-label" for="email">Email</label>
        <input
          id="email"
          type="email"
          formControlName="email"
          autocomplete="email"
          aria-required="true"
          class="gt-input"
          [attr.aria-invalid]="form.controls.email.invalid && form.controls.email.touched"
        />
        @if (form.controls.email.touched) {
          @if (form.controls.email.hasError('required')) {
            <p class="gt-field-error" role="alert">Email is required.</p>
          } @else if (form.controls.email.hasError('email')) {
            <p class="gt-field-error" role="alert">Please enter a valid email address.</p>
          }
        }
      </div>

      @if (successMessage()) {
        <div class="gt-banner gt-banner-success" role="status">{{ successMessage() }}</div>
      }
      @if (errorMessage()) {
        <div class="gt-banner gt-banner-error" role="alert">{{ errorMessage() }}</div>
      }

      <div class="gt-btn-row">
        <button type="submit" class="gt-btn gt-btn-primary" [disabled]="isSubmitting()">
          {{ isSubmitting() ? 'Saving…' : 'Save Profile' }}
        </button>
      </div>
    </form>
  </div>

  <h2 class="gt-section-title">Current Profiles</h2>

  @if (profiles().length === 0) {
    <p class="gt-empty">No profiles yet.</p>
  } @else {
    <div class="gt-list">
      <div class="gt-list-header">
        <span>Name</span>
        <span>Email</span>
      </div>
      @for (p of profiles(); track p.id) {
        <div class="gt-list-row">
          <span>{{ p.first_name }} {{ p.last_name }}</span>
          <span class="gt-text-muted">{{ p.email }}</span>
        </div>
      }
    </div>
  }
</div>
